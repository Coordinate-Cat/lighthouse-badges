language: node_js
node_js:
- "stable"
services:
- docker
script:
  - npm run lint
  - npm run test
  - bash <(curl -s https://codecov.io/bash) -e TRAVIS_NODE_VERSION
  - npm run system-test:run
  - docker build -t emazzotta/lighthouse-badges .
  - docker run emazzotta/lighthouse-badges /bin/sh -c "lighthouse-badges --single-badge --save-report --urls https://emanuelemazzotta.com && EXEC_PATH=/home/chrome/reports npm run system-test:verify --prefix /home/lighthouse"
